<div ngDraggable [handle]="popupHandle" role="popup-execution-dashboard" class="">
  <header>
    <h2 role="handle" #popupHandle>Execution Dashboard</h2>
    <i (click)="closeWindow()" role="closing" class="pmap-15"></i>
  </header>
  <section>
    <div class="header">
      <div class="row">
        <div class="prev-arrows"><button (click)="choosePreviousExecution()" type="button"><i class="pmap-432"></i></button><button type="button"><i class="pmap-44"></i></button></div>
        <div class="container">
          <div class="col">
            <h2> {{ map.name }}</h2>
            <h4>Execution Summary</h4>
            <div role="box-summary">
              <div class="cell">
                <div>
                  <div class="str"><span class="execution-label cell">Start Time</span><span class="cell">{{ execution.resObj.startDate | date:'short' }}</span></div>
                  <div class="str"><span class="execution-label cell">End Time</span><span class="cell">{{ execution.resObj.finishDate | date:'short' }}</span></div>
                </div>
              </div>
              <div class="cell">
                <div>
                  <div class="str"><span class="execution-label cell">Total Time</span><span class="cell">{{ execution.resObj.finishDate - execution.resObj.startDate }}</span></div>
                  <div class="str"><span class="execution-label cell">Status</span>
                    <div [hidden]="execution.resObj.status < 0"><span role="status" class="success cell"><i class="pmap-40"></i></span></div>
                    <div [hidden]="execution.resObj.status >= 0"><span role="status" class="danger cell"><i class="pmap-40"></i></span></div>
                  </div>
                </div>
              </div>
              <div class="cell">
                <div>
                  <div class="str"><span class="execution-label cell">User</span><span class="cell">{{ execution.lastEditor }}</span></div>
                  <div class="str"><span class="execution-label cell">Run</span><span class="cell"> {{ execution.number }} </span></div>
                </div>
              </div>
              <div class="cell">
                <div>
                  <div class="str"><span class="execution-label cell">Version</span><span class="cell">  </span></div>
                </div>
              </div>
            </div>
          </div>
          <div class="col">
            <div class="gchart" data-height="100%" data-position="right" data-width="100%">
              <div class="cell chart-block" [style.width.px]="100">
                <canvas #aggStatusChart width="150" height="150"></canvas>
              </div>
              <div class="cell chart-block-right">
                <div><span><i class="green label-icon"></i>Server Success</span></div>
                <div><span><i class="yellow label-icon"></i>Server Partial</span></div>
                <div><span><i class="red label-icon"></i>Server Failed</span></div>
                <div><span><i class="blue label-icon"></i>Server didn't run</span></div>
              </div>
            </div>
            <button type="button" (click)="showLog(execution)"><i class="pmap-42"></i></button>
          </div>
        </div>
        <div class="next-arrows"><button (click)="chooseNextExecution()" type="button"><i class="pmap-43"></i></button><button type="button"><i class="pmap-442"></i></button></div>
      </div>
    </div>
    <div class="section-processes">
      <h4>Processes</h4>
      <div class="row">
        <div class="prev-arrows"><button  (click)="previousProcesses()" type="button"><i class="pmap-432"></i></button><button type="button"><i class="pmap-44"></i></button></div>
        <div class="container">
          <div class="col" *ngFor="let process of processes">
            <!--  -->
            <app-item-execution-result (click)="chooseProcess(process)" [process]="process"></app-item-execution-result>
          </div>
        </div>
        <div class="next-arrows"><button (click)="nextProcesses()" type="button"><i class="pmap-43"></i></button><button type="button"><i class="pmap-442"></i></button></div>
      </div>
    </div>
    <div class="hr"><i></i></div>
    <div class="section-actions">
      <h4>Actions</h4>
      <div class="row">
        <div class="prev-arrows"><button (click)="previousActions()" type="button"><i class="pmap-432"></i></button><button type="button"><i class="pmap-44"></i></button></div>
        <div class="container">
          <div class="col" *ngFor="let action of actions">
            <!--  -->
            <app-item-execution-result [process]="action"></app-item-execution-result>
          </div>
        </div>
        <div class="next-arrows"><button (click)="nextActions()" type="button"><i class="pmap-43"></i></button><button type="button"><i class="pmap-442"></i></button></div>
      </div>
    </div>

  </section>
</div>
